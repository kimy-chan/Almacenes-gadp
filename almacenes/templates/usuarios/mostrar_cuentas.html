{% extends '../base.html' %}
{% load static %}
{% block index %}

<div class="container table-responsive">
    <h2 class="text-center">Cuentas de usuario</h2>
    <div class="row justify-content-start">
        <div class="col-auto me-2">
            <a class="btn btn-success btn-sm" href="{% url 'creando_usuarios' %}">Añadir Usuario</a>
        </div>
        <div class="col-auto me-2 ms-2">
            <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#exampleModal">
                Secretarias
            </button>
        </div>
        <div class="col-auto ms-2">
            <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#rolesModal">
                Area
            </button>
        </div>
        <div class="col-auto ms-2">
            <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#modalUnidad">
                unidad
            </button>
        </div>
        <div class="col-auto ms-2">
            <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#servicios">
                Dir. de servicios
            </button>
        </div>
        <div class="col-auto ms-2">
            <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#departamental">
                Dir. departamental
            </button>
        </div>
        <div class="col-auto ms-2">
            <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#oficinas">
                Oficinas
            </button>
        </div>

        <div class="col-auto ms-2">
            <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#rolesModal">
                Crear ruta pedido
            </button>
        </div>

    </div>

    <table class="table table-striped mt-4">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Nombre Completo</th>
                <th scope="col">C.I</th>
                <th scope="col">Usuario</th>
                <th scope="col">Rol</th>
                <th scope="col">Accion</th>
            </tr>
        </thead>
        <tbody>
            {%for cuentas in data %}
            <tr>
                <td>{{cuentas.persona.nombre}} {{cuentas.persona.apellidos}}</td>
                <td>{{cuentas.persona.cedula_identidad}}</td>
                <td>{{cuentas.username}}</td>
                <td>{{cuentas.rol}}</td>


                <td>
                    <a class="btn btn-secondary btn-sm"
                        href="{% url 'actulizar_cuenta_usuario' cuentas.id cuentas.persona.id  %}">Editar</a>
                    <a class="btn btn-danger btn-sm" href="{% url 'eliminar_cuenta' cuentas.id %}">eliminar</a>
                    {%if cuentas.es_activo %}
                    <a class="btn btn-warning btn-sm" href="{% url 'desactivar_cuenta' cuentas.id %}">Desactivar</a>
                    {%else%}
                    <a class="btn btn-success btn-sm" href="{% url 'activar_cuenta' cuentas.id %}">Activar</a>
                    {% endif %}

                </td>

            </tr>
            {% endfor %}
        </tbody>
    </table>


    <!--modal secretaria-->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Secreatarias</h5>

                </div>
                <div class="modal-body">
                    <div class="col-auto me-2 ms-2">
                        <form id="form_secretaria" action="{%url 'crear_secretaria_listar' %}" method="POST">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-6">
                                    <label for="id_secretaria">Nombre secretaria</label>
                                    <input type="text" id="id_secretaria" name="secretaria" class="form-control"
                                        required>
                                    <span id="error"></span>
                                </div>
                                <div class="col-2" style="margin-top: 28px;">
                                    <button id="guardar_secretaria" class="btn btn-success btn-sm"
                                        type="submit">Añadir</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <table class="table ">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Secreataria</th>
                            </tr>
                        </thead>
                        <tbody id="tbody_table">

                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>




    <!--fin modal Area de tarabajo-->


    <div class="modal fade" id="modalUnidad" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Unidad</h5>

                </div>
                <div class="modal-body">
                    <div class="col-auto me-2 ms-2">
                        <form id="unidadform" action="{%url 'unidad' %}" method="POST">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-6">
                                    <label for="id_secretaria">Nombre unidad</label>
                                    <input type="text" id="id_secretaria" name="unidad" class="form-control" required>
                                    <span id="error_unidad"></span>
                                </div>
                                <div class="col-2" style="margin-top: 28px;">
                                    <button id="unidad" class="btn btn-success btn-sm" type="submit">Añadir</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <table class="table ">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Unidad</th>
                            </tr>
                        </thead>
                        <tbody id="tbody_table_unidad">

                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>




    <!--modal Roles-->
    <div class="modal fade" id="rolesModal" tabindex="-1" role="dialog" aria-labelledby="rolesModal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Areas de trabajo</h5>

                </div>
                <div class="modal-body">
                    <div class="col-auto me-2 ms-2">
                        <form id="id_form_trabajo" action="{% url 'crear_aras_trabajo_listar' %}" method="POST">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-6">
                                    <label for="nombre_area">Nombre de area</label>
                                    <input type="text" id="nombre_area" name="nombre_area" class="form-control"
                                        required>
                                    <span id="error_trabajo"></span>
                                </div>
                                <div class="col-2" style="margin-top: 28px;">
                                    <button id="id_area_trabajo" class="btn btn-success btn-sm"
                                        type="submit">Añadir</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <table class="table ">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Areas</th>
                            </tr>
                        </thead>
                        <tbody id="tbody_table_trabajo">

                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
    <!--fin modal roles-->

    <div class="modal fade" id="servicios" tabindex="-1" role="dialog" aria-labelledby="servicios" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">dir. servicios</h5>

                </div>
                <div class="modal-body">
                    <div class="col-auto me-2 ms-2">
                        <form id="id_form_servicios" action="{% url 'servicios' %}" method="POST">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-6">
                                    <label for="servicios">Servicios</label>
                                    <input type="text" id="servicios" name="servicios" class="form-control" required>
                                    <span id="error_servicios"></span>
                                </div>
                                <div class="col-2" style="margin-top: 28px;">
                                    <button id="id_servicios" class="btn btn-success btn-sm"
                                        type="submit">Añadir</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <table class="table ">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Servicios</th>
                            </tr>
                        </thead>
                        <tbody id="tbody_table_servicios">

                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>



    <div class="modal fade" id="departamental" tabindex="-1" role="dialog" aria-labelledby="departamental"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">dir. departamental</h5>

                </div>
                <div class="modal-body">
                    <div class="col-auto me-2 ms-2">
                        <form id="id_form_departamental" method="POST">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-6">
                                    <label for="departamental">Departamental</label>
                                    <input type="text" id="departamental" name="departamental" class="form-control"
                                        required>
                                    <span id="error_departamental"></span>
                                </div>
                                <div class="col-2" style="margin-top: 28px;">
                                    <button id="id_departamental" class="btn btn-success btn-sm"
                                        type="submit">Añadir</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <table class="table ">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">departamental</th>
                            </tr>
                        </thead>
                        <tbody id="tbody_table_departamental">

                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>


    <div class="modal fade" id="oficinas" tabindex="-1" role="dialog" aria-labelledby="oficinas" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Oficinas</h5>

                </div>
                <div class="modal-body">
                    <div class="col-auto me-2 ms-2">
                        <form id="id_form_oficinas" method="POST">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-6">
                                    <label for="ofcinas">Oficinas</label>
                                    <input type="text" id="oficinas" name="oficinas" class="form-control" required>
                                    <span id="error_oficinas"></span>
                                </div>
                                <div class="col-2" style="margin-top: 28px;">
                                    <button id="id_oficinas" class="btn btn-success btn-sm"
                                        type="submit">Añadir</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <table class="table ">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Oficinas</th>
                            </tr>
                        </thead>
                        <tbody id="tbody_table_oficinas">

                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
    {% include 'paginador/paginador.html' %}
</div>



{% endblock index %}

{% block js %}
<script src="{% static 'js/secretaria.js' %}"></script>
<script src="{% static 'js/areas_trabajo.js' %}"></script>
<script src="{% static 'js/unidad.js' %}"></script>
<script src="{% static 'js/servicios.js' %}"></script>
<script src="{% static 'js/dir.departamental.js' %}"></script>
<script src="{% static 'js/oficinas.js' %}"></script>

<script>
    window.onload = function () {
        listar_areas_trabajo(),
            Listar_secretaria(),
            listar_unidad(),
            listar_servicios(),
            listar_departamental(),
            listar_oficinas()
    }
</script>

{% endblock js %}